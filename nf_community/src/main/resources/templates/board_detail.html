<style>
  *{
    margin: 0;
    padding: 0;
  }
  .popupDetailMainView {
    display: none;
    position : fixed;
    top : 0;
    left : 0;
    width : 100%;
    height : 100%;
    background-color: rgba(0,0,0,0.2);
    align-items: center;
    justify-content: center;
  }
  .popupDetailSubView {
    width : auto;
    height: auto;
    padding: 10px;
    background-color: white;
    box-sizing: border-box;

    border-radius: 10px;
    box-shadow: 0 2px 3px 0 rgba(34, 36, 38, 0.15);
  }
  .popupDetailMainView.show {
    display: flex;
  }

  #bcontent {
    width: 500px;
    height: 300px;
  }
</style>

<div id="popupBoardDetailView" class="popupDetailMainView">
  <div class="popupDetailSubView">
    <h3>게시글 상세 보기</h3>
    <br>
    <p><span id="btitle">제목</span></p>
    <p><span id="writer">작성자</span></p>
    <p><span id="bdate">날짜</span></p>
    <textarea id="bcontent">내용</textarea>
    <div id="fileList"></div>
    <input type="hidden" id="bno" value="">
    <p><button id="modBtn">수정</button><button id="delBtn">삭제</button></p>
  </div>
</div>

<script>
  // 팝업 닫기 함수
  let closeBoardDetailPopup = function () {
    $("#popupBoardDetailView").toggleClass('show');
    const attrShow = $("#popupBoardDetailView").attr('show');
    if (attrShow === undefined || attrShow === false) {
      $("body").css("overflow", "auto");
    }
    // 초기화
    $("#bcontent").attr("disabled", true);
    $("#delBtn").attr("disabled", false);
    $("#modBtn").html("수정");
  };
  // 팝업 클릭 이벤트 처리
  $("#popupBoardDetailView").click( (event) => {
    if (event.target === $("#popupBoardDetailView")[0]) {
      closeBoardDetailPopup();
    }
  });
  // 삭제 버튼 클릭 이벤트 처리
  $("#delBtn").click(function () {
    $.ajax({
      url: "/board/delete",
      type: "GET",
      data: {"bno": $("#bno").val()},
      success: function (result){
        alert(result);
      },
      error: function (error){
        alert(error);
      },
      complete: function () {
        closeBoardDetailPopup();
      }
    });
  });
  // 수정 버튼 클릭 이벤트 처리
  $("#modBtn").click(function () {
    $("#bcontent").attr("disabled", false);
    $("#modBtn").html("작성");

    $.ajax({
      url: "/board/update",
      type: "POST",
      data: {"bno": $("#bno").val(),
        "btitle": "asdsadsadsadsadsadsadsadsadsadsadsad",
        "bcontent": "fdgdgddhgfhfgdhgfhfhgfhgfhfhgfhgfhgfhgfh"
      },
      success: function (result){
        alert(result);
      },
      error: function (error){
        alert(error);
      },
      complete: function () {
        closeBoardDetailPopup();
      }
    });
  });
</script>